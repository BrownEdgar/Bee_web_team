!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=24)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"ErrorMessage",(function(){return a})),n.d(t,"Errors",(function(){return s}));var a={EMAIL_EXIST:"This Email is already exists",SERVER_ERROR:"Something is Wrong, Server error",ID_ERROR:"ID is not found",NOTFOUND_ERROR:"Is not found",BENERR_FAILED:"Benefit update failed",NO_DATA_ERROR:"We don't have any data yet",CANDIDAT_NOTFOUND:"Candidat is not found",UPDATE_ERROR:"Update failed",GIFT_ERROR:"This user has already received this benefit.",POSITION_EXIST:"This description or title already exists",VACATION_ERROR:"You cannot ask for vacation while on vacation",SUCCESSFUL:"Successful operation",EXTRA_ERROR:"Some field is superfluous / extra field",REGISTER_ERROR:"Some field is not present, please fill correct"},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"notFoundError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.NOTFOUND_ERROR;e.status(404).json({message:t})}},{key:"conflictError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something is Wrong";e.status(409).json({message:t})}},{key:"registerError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.REGISTER_ERROR;e.status(412).json({message:t})}},{key:"serverError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.SERVER_ERROR;e.status(500).json({message:t})}}])&&r(t.prototype,n),s&&r(t,s),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"ErrorHandler",(function(){return c})),n.d(t,"handleError",(function(){return d}));var c=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,u(t).call(this))).statusCode=e,r.message=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,e),t}(s(Error)),d=function(e,t){var n=e.statusCode,r=e.message;t.status(n).json({status:"error",statusCode:n,message:r})}},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("express")},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(7),s=n(22),i=(n(1).ErrorHandler,n(0)),o=["name","surname","age","email","password","gender","dob","role"],u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,(n=[{key:"isRegister",value:function(e,t,n){if(8!=s.size(e.body))return t.status(412).json({message:i.EXTRA_ERROR});for(var r in e.body)if(!s.includes(o,r))return t.status(412).send(i.REGISTER_ERROR);n()}},{key:"isLogin",value:function(e,t,n){try{var r=e.headers.authorization.split(" ")[1],s=a.verify(r,process.env.SESSION_SECRET);e.userData=s,n()}catch(e){return t.status(401).json({message:"Please Login before doing any operations"})}}}])&&r(t.prototype,n),u&&r(t,u),e}();e.exports=u},function(e,t){e.exports=require("bcrypt")},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=a.a.Schema({_id:{type:a.a.Schema.Types.ObjectId},name:{type:String,required:!0,maxlength:1024,minlength:2},surname:{type:String,required:[!0,"surname fields is required"],maxlength:1024,minlength:2},age:{type:Number,required:!0,min:16,max:67},email:{type:String,required:!0,maxlength:1024,minlength:5},password:{type:String,required:!0,maxlength:156,minlength:8},gender:{type:String,enum:["male","female"]},dob:{type:Date,required:[!0,"dob field is required"],min:"1957-09-28",max:"2000-01-01"},role:{type:String,enum:["0","1","2"],required:[!0,'Must by "0"-admin "1"-meneger, "2"-stuff']},deletedAt:{type:Date,default:null}});t.default=a.a.model("User",s)},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("express-session")},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=a.a.Schema({_id:{type:a.a.Schema.Types.ObjectId},title:{type:String,required:[!0,"field is required, please fill in the field"]},description:{type:String,required:[!0,"field is required, please add a description"]}});t.default=a.a.model("Benefit",s)},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=a.a.Schema({benefitId:{type:a.a.Schema.Types.ObjectId,ref:"Benefit",required:[!0,"please fill in the field"]},userId:{type:a.a.Schema.Types.ObjectId,ref:"User",required:[!0,"please fill in the field"]},createdAt:{type:Date,default:(new Date).toDateString()}});t.default=a.a.model("BenefitHistory",s)},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=a.a.Schema({_id:{type:a.a.Schema.Types.ObjectId},openPosId:{type:a.a.Schema.Types.ObjectId,ref:"OpenPosition",required:!0},name:{type:String,required:!0,max:255,min:2},surname:{type:String,required:!0,max:255,min:2},email:{type:String,required:!0,max:255,min:6},gender:{type:String,enum:["male","female"]},age:{type:Number,required:[!0,"please indicate your age"],min:18,max:63},skills:{type:String,required:[!0,"please indicate yours skills"]},education:{type:String,required:[!0,"please indicate where you studied"]},experience:{type:String,required:[!0,"please indicate yours experience"]}});t.default=a.a.model("Condidat",s)},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=a.a.Schema({id:{type:a.a.Schema.Types.ObjectId},title:{type:String,required:!0,maxlength:100,minlength:2},description:{type:String,required:!0,maxlength:1024,minlength:2},gender:{type:String,enum:["male","female"]},ageLimit:{type:Number,default:18,min:18,max:63},salary:{type:Number,default:5e4,required:!0,min:5e4}});t.default=a.a.model("OpenPosition",s)},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=Date.now()+5184e6,i=a.a.Schema({userId:{type:a.a.Schema.Types.ObjectId,ref:"User",required:!0},dateStart:{type:Date,min:Date.now,max:s,default:function(){return Date.now()+108e5},required:!0},dateEnd:{type:Date,min:Date.now,max:s,default:function(){return Date.now()+6048e5},required:!0}});t.default=a.a.model("Ticket",i)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),s=n.n(a);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=new r.Errors,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,a;return t=e,(n=[{key:"getBenefits",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.benefits.find().select("title description _id"));case 2:return(t=n.sent).length<1&&o.conflictError(e,r.ErrorMessage.NO_DATA_ERROR),n.abrupt("return",{count:t.length,benefits:t});case 5:case"end":return n.stop()}}),null,this)}},{key:"getBenefit",value:function(e,t){var n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.models.benefits.findOne({_id:t}).select("title description _id"));case 2:return(n=a.sent)||o.conflictError(e,r.ErrorMessage.ID_ERROR),a.abrupt("return",n);case 5:case"end":return a.stop()}}),null,this)}},{key:"addBenefits",value:function(e,t){var n,a,i=this,u=arguments;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:"for a good job!",console.log(t,n),a=this.models.benefits.find({title:t,description:n}).exec().then((function(a){if(!(a.length>=1))return new i.models.benefits({_id:new s.a.Types.ObjectId,title:t,description:n}).save();o.conflictError(e,r.ErrorMessage.POSITION_EXIST)})),c.abrupt("return",a);case 4:case"end":return c.stop()}}),null,this)}},{key:"updateBenefits",value:function(e,t,n){var r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.models.benefits.findByIdAndUpdate({_id:t},{$set:n},{new:!0}).select("title description _id"));case 2:if(r=a.sent){a.next=5;break}return a.abrupt("return",o.notFoundError(e));case 5:return a.abrupt("return",r);case 6:case"end":return a.stop()}}),null,this)}},{key:"deleteBenefit",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.benefits.deleteOne({_id:e}));case 2:if(t=n.sent,console.log("benefits: ",t),0!=t.deletedCount){n.next=7;break}return n.abrupt("return",o.conflictError(409,r.ErrorMessage.ID_ERROR));case 7:return n.abrupt("return",{count:t.length,benefits:t});case 8:case"end":return n.stop()}}),null,this)}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,i;return t=e,(n=[{key:"getBenefitsHistory",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.models.benefitsHistory.find());case 2:if(!((e=t.sent).length<1)){t.next=5;break}throw new r.ErrorHandler(500,a.ErrorMessage.NO_DATA_ERROR);case 5:return t.abrupt("return",{count:e.length,benHistory:e});case 6:case"end":return t.stop()}}),null,this)}},{key:"getHistoryById",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.benefitsHistory.findOne({_id:e}));case 2:if(t=n.sent){n.next=5;break}throw new r.ErrorHandler(409,a.ErrorMessage.ID_ERROR);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"addBenefitsHistory",value:function(e,t){var n,s=this;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=this.models.benefitsHistory.find({benefitId:e,userId:t}).exec().then((function(n){if(n.length>=1)throw new r.ErrorHandler(409,a.ErrorMessage.GIFT_ERROR);var i=new s.models.benefitsHistory({benefitId:e,userId:t});return i.save(),i})).catch((function(e){throw new r.ErrorHandler(500,a.ErrorMessage.GIFT_ERROR)})),i.abrupt("return",n);case 2:case"end":return i.stop()}}),null,this)}},{key:"deleteBenefitHistory",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.benefitsHistory.deleteOne({_id:e}));case 2:if(t=n.sent){n.next=5;break}throw new r.ErrorHandler(409,a.ErrorMessage.NOTFOUND_ERROR);case 5:return n.abrupt("return",{count:t.length,benHistory:t});case 6:case"end":return n.stop()}}),null,this)}}])&&s(t.prototype,n),i&&s(t,i),e}();t.default=i},function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),s=n(2),i=n.n(s),o=n(1),u=n(0);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,r;return t=e,(n=[{key:"getUser",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.users.findOne({_id:e}).select("name email dob role _id"));case 2:if(t=n.sent){n.next=5;break}throw new o.ErrorHandler(409,"User ".concat(u.ErrorMessage.ID_ERROR));case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"getUsers",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.models.users.find().select("name surname age email dob role _id"));case 2:if(!((e=t.sent).length<1)){t.next=5;break}throw new o.ErrorHandler(409,"".concat(u.ErrorMessage.NO_DATA_ERROR));case 5:return t.abrupt("return",{count:e.length,users:e});case 6:case"end":return t.stop()}}),null,this)}},{key:"addUser",value:function(e,t,n,r,s,c,d,l){var f,p=this;return regeneratorRuntime.async((function(g){for(;;)switch(g.prev=g.next){case 0:return f=this.models.users.find({email:r}).exec().then((function(f){if(f.length>=1)return console.log(f.length),new o.ErrorHandler(409,"".concat(u.ErrorMessage.EMAIL_EXIST));var g=new p.models.users({_id:new i.a.Types.ObjectId,name:e,surname:t,age:n,email:r,password:s,gender:c,dob:d,role:l});return a.a.genSalt(10,(function(e,t){a.a.hash(g.password,t,(function(e,t){if(e)throw e;return g.password=t,g.save()}))})),new o.ErrorHandler(201,"".concat(u.ErrorMessage.SUCCESSFUL))})),g.abrupt("return",f);case 2:case"end":return g.stop()}}),null,this)}},{key:"updateUser",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.models.users.findByIdAndUpdate({_id:e},{$set:t},{new:!0}).select("name email gender dob _id"));case 2:if(n=r.sent,n){r.next=5;break}throw new o.ErrorHandler(409,"User ".concat(u.ErrorMessage.NOTFOUND_ERROR));case 5:return r.abrupt("return",n);case 6:case"end":return r.stop()}}),null,this)}},{key:"deleteUser",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.users.findByIdAndUpdate({_id:e},{deletedAt:Date.now()}));case 2:if(t=n.sent){n.next=5;break}throw new o.ErrorHandler(409,"User ".concat(u.ErrorMessage.NOTFOUND_ERROR));case 5:return n.abrupt("return",{count:t.length,user:t});case 6:case"end":return n.stop()}}),null,this)}}])&&c(t.prototype,n),r&&c(t,r),e}();t.default=d},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(1),i=n(0);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,r;return t=e,(n=[{key:"getCandidats",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.models.candidat.find().select("openPosId name surname email age skills experience"));case 2:if(!((e=t.sent).length<1)){t.next=5;break}throw new s.ErrorHandler(409,i.ErrorMessage.NO_DATA_ERROR);case 5:return t.abrupt("return",{count:e.length,candidats:e});case 6:case"end":return t.stop()}}),null,this)}},{key:"getSpecialCandidat",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.candidat.findOne({_id:e}).select("openPosId name surname email age skills experience"));case 2:if(t=n.sent){n.next=5;break}throw new s.ErrorHandler(409,i.ErrorMessage.NOTFOUND_ERROR);case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"addCandidats",value:function(e,t,n,r,o,u,c,d,l){var f,p=this;return regeneratorRuntime.async((function(g){for(;;)switch(g.prev=g.next){case 0:return f=this.models.candidat.find({email:r}).exec().then((function(f){return f.length>=1?new s.ErrorHandler(409,i.ErrorMessage.EMAIL_EXIST):(new p.models.candidat({_id:new a.a.Types.ObjectId,openPosId:e,name:t,surname:n,email:r,age:o,gender:u,skills:c,education:d,experience:l}).save(),{status:201,message:"Candidats is created"})})).catch((function(e){return new s.ErrorHandler(500,i.ErrorMessage.SERVER_ERROR)})),g.abrupt("return",f);case 2:case"end":return g.stop()}}),null,this)}},{key:"updateCandidat",value:function(e,t){var n,r=this;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("updateOps",t.email),n=this.models.candidat.find({email:t.email}).exec().then((function(n){var a;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(n.length>=1)){o.next=4;break}return o.abrupt("return",new s.ErrorHandler(409,i.ErrorMessage.EMAIL_EXIST));case 4:return o.next=6,regeneratorRuntime.awrap(r.models.candidat.findByIdAndUpdate({_id:e},{$set:t},{new:!0}));case 6:if(a=o.sent){o.next=9;break}return o.abrupt("return",new s.ErrorHandler(400,i.ErrorMessage.UPDATE_ERROR));case 9:return o.abrupt("return",a);case 10:case"end":return o.stop()}}))})).catch((function(e){return new s.ErrorHandler(500,i.ErrorMessage.SERVER_ERROR)})),a.abrupt("return",n);case 3:case"end":return a.stop()}}),null,this)}},{key:"deleteCandidat",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.candidat.deleteOne({_id:e}));case 2:if(t=n.sent){n.next=5;break}throw new s.ErrorHandler(409,"Candidat ".concat(i.ErrorMessage.NOTFOUND_ERROR));case 5:return n.abrupt("return",{count:t.length,candidats:t});case 6:case"end":return n.stop()}}),null,this)}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=u},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,i;return t=e,(n=[{key:"getOpenPosition",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.models.openPosition.find().select("_id title description ageLimit salary"));case 2:if(!((e=t.sent).length<1)){t.next=5;break}throw new r.ErrorHandler(500,a.ErrorMessage.NO_DATA_ERROR);case 5:return t.abrupt("return",{count:e.length,positions:e});case 6:case"end":return t.stop()}}),null,this)}},{key:"getSpecialPosition",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.openPosition.findOne({_id:e}).select("_id title description ageLimit salary"));case 2:if(t=n.sent){n.next=5;break}throw new r.ErrorHandler(500,"Position ".concat(a.ErrorMessage.ID_ERROR));case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"addOpenPosition",value:function(e,t,n,s,i){var o,u=this;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return o=this.models.openPosition.find({$or:[{title:e},{description:t}]},{_id:0}).exec().then((function(o){if(o.length>=1)throw new r.ErrorHandler(500,"".concat(a.ErrorMessage.POSITION_EXIST));return new u.models.openPosition({title:e,description:t,gender:n,ageLimit:s,salary:i}).save(),{status:201,message:"Open Position is created"}})).catch((function(e){throw new r.ErrorHandler(500,"".concat(a.ErrorMessage.SERVER_ERROR))})),c.abrupt("return",o);case 2:case"end":return c.stop()}}),null,this)}},{key:"updateOpenPosition",value:function(e,t){var n;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(this.models.openPosition.findByIdAndUpdate({_id:e},{$set:t},{new:!0}).select("_id title description ageLimit salary"));case 2:if(n=s.sent){s.next=5;break}throw new r.ErrorHandler(500,"Open Position ".concat(a.ErrorMessage.UPDATE_ERROR));case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),null,this)}},{key:"deleteOpenPosition",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.openPosition.deleteOne({_id:e}));case 2:if(t=n.sent){n.next=5;break}throw new r.ErrorHandler(500,"Open Position ".concat(a.ErrorMessage.NOTFOUND_ERROR));case 5:return n.abrupt("return",{count:t.length,position:t});case 6:case"end":return n.stop()}}),null,this)}}])&&s(t.prototype,n),i&&s(t,i),e}();t.default=i},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.models=t}var t,n,i;return t=e,(n=[{key:"getTicketLists",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.models.ticketList.find().sort({dateStart:1}));case 2:if(!((e=t.sent).length<1)){t.next=5;break}throw new r.ErrorHandler(409,a.ErrorMessage.NO_DATA_ERROR);case 5:return t.abrupt("return",{count:e.length,ticketList:e});case 6:case"end":return t.stop()}}),null,this)}},{key:"getTicketListById",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.ticketList.findOne({_id:e},{_id:0}).select("userId dateStart dateEnd"));case 2:if(t=n.sent){n.next=5;break}throw new r.ErrorHandler(409,"Ticket List ".concat(a.ErrorMessage.ID_ERROR));case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"addTicketList",value:function(e,t,n){var s,i=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return s=this.models.ticketList.find({userId:e}).exec().then((function(s){return s.length>=1?new r.ErrorHandler(409,a.ErrorMessage.VACATION_ERROR):(new i.models.ticketList({userId:e,dateStart:t,dateEnd:n}).save(),{status:201,message:"Thanck you, Ticket List  is pending"})})).catch((function(e){return new r.ErrorHandler(500,a.ErrorMessage.SERVER_ERROR)})),o.abrupt("return",s);case 2:case"end":return o.stop()}}),null,this)}},{key:"updateTicketList",value:function(e,t){var n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.models.ticketList.findByIdAndUpdate({_id:e},{$set:t},{new:!0}).select("userId dateStart dateEnd"));case 2:if(n=a.sent,n){a.next=5;break}return a.abrupt("return",new r.ErrorHandler(409,"Ticket ListError ".concat(Message.UPDATE_ERROR)));case 5:return a.abrupt("return",new r.ErrorHandler(200,n));case 6:case"end":return a.stop()}}),null,this)}},{key:"deleteTicketList",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.models.ticketList.deleteOne({_id:e}));case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return",new r.ErrorHandler(500,"Ticket List ".concat(a.ErrorMessage.NOTFOUND_ERROR)));case 5:return n.abrupt("return",{count:t.length,ticketList:t});case 6:case"end":return n.stop()}}),null,this)}}])&&s(t.prototype,n),i&&s(t,i),e}();t.default=i},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";n.r(t);n(1);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(n(0).Errors);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getBenefit",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.id,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.benefits.getBenefit(t,n));case 4:r=a.sent,t.status(200).send(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t.status(500).send(a.t0.message);case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},{key:"getBenefits",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.benefits.getBenefits(t));case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"addBenefits",value:function(e,t){var n,r,a,s;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.body,r=n.title,a=n.description,i.prev=1,i.next=4,regeneratorRuntime.awrap(e.app.services.benefits.addBenefits(t,r,a));case 4:s=i.sent,t.status(200).send(s),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),t.status(500).send(i.t0.message);case 11:case"end":return i.stop()}}),null,null,[[1,8]])}},{key:"updateBenefits",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.id,r=e.body,a.next=4,regeneratorRuntime.awrap(e.app.services.benefits.updateBenefits(t,n,r).then((function(e){t.status(200).json(e)})).catch((function(e){t.status(500).json({error:e})})));case 4:a.sent;case 5:case"end":return a.stop()}}))}},{key:"deleteBenefits",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.params.id,r.prev=1,r.next=4,regeneratorRuntime.awrap(e.app.services.benefits.deleteBenefit(n));case 4:return r.sent,r.abrupt("return",t.status(201).json({message:"Benefit is deleted!",benefitId:n}));case 8:r.prev=8,r.t0=r.catch(1),t.status(500).send(r.t0.message);case 11:case"end":return r.stop()}}),null,null,[[1,8]])}}])&&r(t.prototype,n),a&&r(t,a),e}();t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),s=n(3),i=n.n(s),o=n(9),u=n.n(o),c=n(1),d=n(10),l=n.n(d),f=n(2),p=n.n(f),g={Benefit:n(11),BenefitsHistory:n(12),User:n(6),Candidats:n(13),OpenPosition:n(14),TicketList:n(15)},v={Benefit:n(16),BenefitsHistory:n(17),User:n(18),Candidat:n(19),OpenPosition:n(20),TicketList:n(21)},m=i.a.Router();m.get("/",(function(e,t){t.status(200).send("Welcome to BeeWeb home page")}));var y=m,h=n(5),R=n.n(h),w=n(6),b=n(7),E=n.n(b),x=n(0);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getUsers",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.users.getUsers());case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"getUser",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.userId,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.users.getUser(n));case 4:r=a.sent,t.status(201).send(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t.status(500).send(a.t0.message);case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},{key:"addUser",value:function(e,t){var n,r,a,s,i,o,u,d,l;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:return n=e.body,r=n.name,a=n.surname,s=n.age,i=n.email,o=n.password,u=n.gender,d=n.dob,l=n.role,f.next=3,regeneratorRuntime.awrap(e.app.services.users.addUser(r,a,s,i,o,u,d,l).then((function(e){e?t.status(e.statusCode).json({message:e.message}):t.status(e.statusCode).json({result:e})})).catch((function(e){return new c.ErrorHandler(500,x.ErrorMessage.SERVER_ERROR)})));case 3:f.sent;case 4:case"end":return f.stop()}}))}},{key:"updateUser",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.userId,r=e.body,a.next=4,regeneratorRuntime.awrap(e.app.services.users.updateUser(n,r));case 4:a.sent.save().then((function(e){t.status(200).json(e)})).catch((function(e){throw new c.ErrorHandler(500,x.ErrorMessage.SERVER_ERROR)}));case 6:case"end":return a.stop()}}))}},{key:"deleteUser",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.params.userId,r.prev=1,r.next=4,regeneratorRuntime.awrap(e.app.services.users.deleteUser(n));case 4:if(!r.sent.user.deletedCount){r.next=8;break}return r.abrupt("return",t.status(201).json({message:"User is deleted!",userId:n}));case 8:throw new c.ErrorHandler(409,"User ".concat(x.ErrorMessage.NOTFOUND_ERROR));case 11:throw r.prev=11,r.t0=r.catch(1),new c.ErrorHandler(500,x.ErrorMessage.SERVER_ERROR);case 14:case"end":return r.stop()}}),null,null,[[1,11]])}}])&&k(t.prototype,n),r&&k(t,r),e}(),I=n(4),_=n.n(I),T=i.a.Router(),S=new O,P=new _.a;T.get("/",(function(e,t,n){t.send("register page")})),T.get("/login",(function(e,t,n){t.send("login page")})),T.post("/",P.isRegister,S.addUser),T.post("/login",(function(e,t,n){w.default.find({email:e.body.email}).exec().then((function(n){if(n.length<1)return t.status(401).json({message:"login failed",kind:"Invalid username/password supplied"});R.a.compare(e.body.password,n[0].password,(function(e,r){if(e)return t.status(401).json({message:"login failed"});if(r){var a=E.a.sign({email:n[0].email,userId:n[0]._id},process.env.SESSION_SECRET,{expiresIn:"1h"});return t.status(200).json({message:"Login successful",token:a})}t.status(401).json({message:"Login failed"})}))})).catch((function(e){console.log(e),t.status(500).json({error:e})}))}));var H=T,C=n(3).Router(),j=new(n(23));new(n(4));C.get("/",j.getBenefits),C.post("/",j.addBenefits),C.get("/:id",j.getBenefit),C.patch("/:id",j.updateBenefits),C.delete("/:id",j.deleteBenefits);var B=C;function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getBenefitsHistory",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.benefitsHistorys.getBenefitsHistory());case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(err.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"getHistoryById",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.historyId,a.next=3,regeneratorRuntime.awrap(e.app.services.benefitsHistorys.getHistoryById(n).then((function(e){e&&t.status(200).send(e),t.status(r.statusCode).send(e)})).catch((function(e){t.status(e.statusCode).json({error:e})})));case 3:r=a.sent;case 4:case"end":return a.stop()}}))}},{key:"addBenefitsHistory",value:function(e,t){var n,r,a,s;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.body,r=n.benefitId,a=n.userId,i.next=3,regeneratorRuntime.awrap(e.app.services.benefitsHistorys.addBenefitsHistory(r,a).then((function(e){e&&t.status(200).send(e),t.status(s.statusCode).send(e)})).catch((function(e){t.status(e.statusCode).json({error:e})})));case 3:s=i.sent;case 4:case"end":return i.stop()}}))}},{key:"deleteBenefitHistory",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.historyId,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.benefitsHistorys.deleteBenefitHistory(n));case 4:if(r=a.sent,console.log("delbenefits:",r),!r.benHistory.deletedCount){a.next=9;break}return a.abrupt("return",t.status(201).json({message:"Benefit History is deleted!",benefitId:n}));case 9:throw new c.ErrorHandler(409,x.ErrorMessage.ID_ERROR);case 12:throw a.prev=12,a.t0=a.catch(1),new c.ErrorHandler(500,x.ErrorMessage.SERVER_ERROR);case 15:case"end":return a.stop()}}),null,null,[[1,12]])}}])&&L(t.prototype,n),r&&L(t,r),e}(),M=i.a.Router(),D=new U;new _.a;M.get("/",D.getBenefitsHistory),M.post("/",D.addBenefitsHistory),M.get("/:historyId",D.getHistoryById),M.delete("/:historyId",D.deleteBenefitHistory);var N=M,A=i.a.Router(),q=new O;new _.a;A.get("/",q.getUsers),A.get("/:userId",q.getUser),A.patch("/:userId",q.updateUser),A.delete("/:userId",q.deleteUser);var F=A;function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getOpenPosition",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.openPositions.getOpenPosition());case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"getSpecialPosition",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.openPositionId,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.openPositions.getSpecialPosition(n));case 4:r=a.sent,t.status(201).send(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t.status(500).send(a.t0.message);case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},{key:"addOpenPosition",value:function(e,t){var n,r,a,s,i,o,u;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.body,r=n.title,a=n.description,s=n.gender,i=n.ageLimit,o=n.salary,c.prev=1,c.next=4,regeneratorRuntime.awrap(e.app.services.openPositions.addOpenPosition(r,a,s,i,o));case 4:u=c.sent,t.status(u.status).send(u),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),t.status(500).send(c.t0.message);case 11:case"end":return c.stop()}}),null,null,[[1,8]])}},{key:"updateOpenPosition",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.openPositionId,r=e.body,a.next=4,regeneratorRuntime.awrap(e.app.services.openPositions.updateOpenPosition(n,r));case 4:a.sent.save().then((function(e){t.status(200).json(e)})).catch((function(e){t.status(500).json({error:e})}));case 6:case"end":return a.stop()}}))}},{key:"deleteOpenPosition",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.params.openPositionId,r.prev=1,r.next=4,regeneratorRuntime.awrap(e.app.services.openPositions.deleteOpenPosition(n));case 4:if(!r.sent.position.deletedCount){r.next=8;break}return r.abrupt("return",t.status(201).json({message:"Open Position is deleted!",openPositionsId:n}));case 8:throw new c.ErrorHandler(400,"Open Position ".concat(x.ErrorMessage.ID_ERROR));case 11:r.prev=11,r.t0=r.catch(1),t.status(500).send(r.t0.message);case 14:case"end":return r.stop()}}),null,null,[[1,11]])}}])&&V(t.prototype,n),r&&V(t,r),e}(),G=i.a.Router(),$=new X;new _.a;G.get("/",$.getOpenPosition),G.post("/",$.addOpenPosition),G.get("/:openPositionId",$.getSpecialPosition),G.patch("/:openPositionId",$.updateOpenPosition),G.delete("/:openPositionId",$.deleteOpenPosition);var W=G;function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getCandidats",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.candidats.getCandidats());case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"getSpecialCandidat",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.candidatId,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.candidats.getSpecialCandidat(n));case 4:r=a.sent,t.status(201).send(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t.status(500).send(a.t0.message);case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},{key:"addCandidats",value:function(e,t){var n,r,a,s,i,o,u,c,d,l,f;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:return n=e.body,r=n.openPosId,a=n.name,s=n.surname,i=n.email,o=n.age,u=n.gender,c=n.skills,d=n.education,l=n.experience,p.prev=1,p.next=4,regeneratorRuntime.awrap(e.app.services.candidats.addCandidats(r,a,s,i,o,u,c,d,l));case 4:f=p.sent,t.status(f.statusCode).send(f),p.next=11;break;case 8:p.prev=8,p.t0=p.catch(1),t.status(500).send(p.t0.message);case 11:case"end":return p.stop()}}),null,null,[[1,8]])}},{key:"updateCandidat",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.candidatId,r=e.body,a.next=4,regeneratorRuntime.awrap(e.app.services.candidats.updateCandidat(n,r).then((function(e){t.status(e.statusCode).send(e)})).catch((function(e){t.status(500).json({error:e})})));case 4:a.sent;case 5:case"end":return a.stop()}}))}},{key:"deleteCandidat",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.params.candidatId,r.prev=1,r.next=4,regeneratorRuntime.awrap(e.app.services.candidats.deleteCandidat(n));case 4:if(!r.sent.candidats.deletedCount){r.next=8;break}return r.abrupt("return",t.status(201).json({message:"Candidat is deleted!",benefitId:n}));case 8:throw new c.ErrorHandler(409,x.ErrorMessage.ID_ERROR);case 11:r.prev=11,r.t0=r.catch(1),t.status(500).send(r.t0.message);case 14:case"end":return r.stop()}}),null,null,[[1,11]])}}])&&z(t.prototype,n),r&&z(t,r),e}(),J=i.a.Router(),K=new Y;new _.a;J.get("/",K.getCandidats),J.post("/",K.addCandidats),J.get("/:candidatId",K.getSpecialCandidat),J.patch("/:candidatId",K.updateCandidat),J.delete("/:candidatId",K.deleteCandidat);var Q=J;function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getTicketLists",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(e.app.services.ticketLists.getTicketLists());case 3:n=r.sent,t.status(201).send(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.status(500).send(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}},{key:"getTicketListById",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.ticketId,a.prev=1,a.next=4,regeneratorRuntime.awrap(e.app.services.ticketLists.getTicketListById(n));case 4:r=a.sent,t.send(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),t.send(a.t0.message);case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},{key:"addTicketList",value:function(e,t){var n,r,a,s,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.body,r=n.userId,a=n.dateStart,s=n.dateEnd,o.prev=1,o.next=4,regeneratorRuntime.awrap(e.app.services.ticketLists.addTicketList(r,a,s));case 4:i=o.sent,t.status(i.statusCode).send(i),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),t.status(500).send(o.t0.message);case 11:case"end":return o.stop()}}),null,null,[[1,8]])}},{key:"updateTicketList",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.params.ticketId,r=e.body,a.next=4,regeneratorRuntime.awrap(e.app.services.ticketLists.updateTicketList(n,r).then((function(e){t.status(e.statusCode).send(e)})).catch((function(e){t.status(500).json({error:e})})));case 4:a.sent;case 5:case"end":return a.stop()}}))}},{key:"deleteTicketList",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.params.ticketId,r.prev=1,r.next=4,regeneratorRuntime.awrap(e.app.services.ticketLists.deleteTicketList(n));case 4:if(!r.sent.ticketList.deletedCount){r.next=8;break}return r.abrupt("return",t.status(201).json({message:"Ticket Lists is deleted!",benefitId:n}));case 8:throw new c.ErrorHandler(409,"Ticket List ".concat(x.ErrorMessage.ID_ERROR));case 11:r.prev=11,r.t0=r.catch(1),t.status(500).send(r.t0.message);case 14:case"end":return r.stop()}}),null,null,[[1,11]])}}])&&Z(t.prototype,n),r&&Z(t,r),e}(),te=i.a.Router(),ne=new ee;new _.a;te.get("/",ne.getTicketLists),te.post("/",ne.addTicketList),te.get("/:ticketId",ne.getTicketListById),te.patch("/:ticketId",ne.updateTicketList),te.delete("/:ticketId",ne.deleteTicketList);var re=te;var ae=i()();ae.use(i.a.json()),ae.use(i.a.urlencoded({extended:!1})),p.a.connect(process.env.DB_CONNECTION,{useUnifiedTopology:!0,useNewUrlParser:!0,useCreateIndex:!0},(function(e){return console.log(e)})),ae.use(u()()),ae.use(i.a.urlencoded({extended:!1})),ae.use(i.a.json()),ae.use(l()({secret:process.env.SESSION_SECRET,resave:!1,saveUninitialized:!0})),ae.use("/",y),ae.use("/signup",H),ae.use("/benefits",B),ae.use("/benefitshistorys",N),ae.use("/users",F),ae.use("/openpositions",W),ae.use("/candidats",Q),ae.use("/ticketlists",re),ae.models={users:g.User,benefits:g.Benefit,openPosition:g.OpenPosition,candidat:g.Candidats,benefitsHistory:g.BenefitsHistory,ticketList:g.TicketList},ae.services={users:new v.User(ae.models),benefits:new v.Benefit(ae.models),openPositions:new v.OpenPosition(ae.models),candidats:new v.Candidat(ae.models),benefitsHistorys:new v.BenefitsHistory(ae.models),ticketLists:new v.TicketList(ae.models)},ae.use((function(e,t,n){e.app=ae,n()})),ae.use((function(e,t,n){throw new c.ErrorHandler(404,"page is not found")})),ae.use((function(e,t,n,r){n.status(e.status||500),n.json({error:{message:e.message}})})),ae.use((function(e,t,n,r){Object(c.handleError)(e,n)}));var se=ae,ie=process.env.PORT||3e3;a.a.createServer(se).listen(ie,(function(){return console.log("server started on ".concat(ie))}))}]);